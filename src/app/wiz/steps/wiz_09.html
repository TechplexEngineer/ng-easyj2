<div class="row" ng-controller="Wiz9Ctrl as step">
	<div class="col-sm-2">
		<div class="panel panel-default">
		  <div class="panel-heading">Current Subsystem</div>
		  <div class="panel-body">
		    <!-- <select class="form-control" ng-options="item.name for item in Robot.getSubsystems()">
				</select> -->
				<select class="form-control" ng-model="step.currentSubsystem" ng-change="step.currentSubsysChange()">
	        <option
	          ng-repeat="subsys in Robot.getSubsystems()"
	          value="{{subsys.name}}"
	          ng-selected="{{subsys.name === item.subsystem}}">
	        {{subsys.name}}</option>
	      </select>
		  </div>
		</div>

		<div class="panel panel-default">
		  <div class="panel-heading">Subsystem Actions</div>
		  <div class="panel-body">
			  <div class="list-group">
					<a href
						ng-repeat="action in Robot.getActions(step.currentSubsystem)"
						class="list-group-item"
						ng-class="{active: action.text == step.currentAction}"
						ng-click="step.setActiveAction(action.text)">
						{{action.text}}
						<!-- <i ng-if="!action.isDone" class="fa fa-circle text-danger pull-right" title="Action code is incomplete."></i> -->

						<span ng-if="!action.isDone" class="fa-stack pull-right" title="Action code is incomplete.">
						  <i class="fa fa-circle fa-stack-2x" style="color:white;"></i>
						  <i class="fa fa-circle fa-stack-1x text-danger"></i>
						</span>
						<span ng-if="action.isDone" class="fa-stack pull-right" title="Action code is complete!">
						  <i class="fa fa-circle fa-stack-2x" style="color:white;"></i>
						  <i class="fa fa-check fa-stack-1x text-success"></i>
						</span>
					</a>

					<!-- <a class="list-group-item" href> Done Action
						<i class="fa fa-check text-success pull-right"></i>
					</a>
					<a class="list-group-item" href> Todo Action
						<i class="fa fa-times text-danger pull-right"></i>
					</a> -->
				</div>

				<!-- @todo
				<button type="button" class="btn btn-default">
					<span class="glyphicon glyphicon-plus"></span> Add Action
				</button> -->
			</div>
		</div>

	</div>
	<div id="blocklyDiv" class="col-sm-10" style="height: 480px;"></div>

	<xml id="startingblocks" style="display: none"></xml>

  <xml id="toolbox" style="display: none">
    <category name="Input &amp; Sensors">

      <!-- <category name="User (Joystick)"> -->
        <!-- <block type="declare_joystick"></block>
        <block type="get_joystick_axis"></block>
        <block type="get_joystick_button"></block> -->
      <!-- </category> -->

      <!-- <category name="Gyro"> -->
        <!-- <block type="declare_gyro"></block> -->
        <block type="get_gyro"></block>
        <block type="gyro_reset"></block>
      <!-- </category> -->

      <!-- <category name="Digital"> -->
        <!-- <block type="declare_digital_input"></block> -->
        <block type="get_digital_input_value"></block>
      <!-- </category> -->

      <!-- <category name="Analog"> -->
        <!-- <block type="declare_analog_input"></block> -->
        <block type="get_analog_input_value"></block>
      <!-- </category> -->

    </category>

    <category name="Outputs">
      <!-- <category name="Digital"> -->

        <!-- <block type="declare_digital_output"></block> -->
        <block type="set_digital_output">
          <value name="VALUE">
            <block type="logic_boolean" id="16" x="245" y="191">
              <field name="BOOL">TRUE</field>
            </block>
          </value>
        </block>

      <!-- </category> -->
      <!-- <category name="Relay"> -->
        <!-- <block type="declare_relay"></block> -->
        <block type="set_relay"></block>
      <!-- </category> -->
    </category>

    <category name="Motors">
      <!-- <block type="declare_motor_controller"></block> -->
      <block type="move_motor_controller">
        <value name="SPEED">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="stop_motor_controller"></block>
      <!-- <block type="declare_drivetrain"></block> -->
      <block type="move_drivetrain">
        <value name="MOVE">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="TURN">
          <block type="math_number">
            <field name="NUM">0</field>
          </block>
        </value>
      </block>
      <block type="stop_drivetrain"></block>
      <block type="move_with_joystick"></block>
    </category>

    <category name="Pneumatics">
      <!-- <category name="Compressor"> -->
        <!-- <block type="declare_compressor"></block> -->
        <!-- <block type="compressor_start"></block> -->
      <!-- </category> -->
      <!-- <category name="Solenoid (Valve)"> -->
        <!-- <block type="declare_solenoid_single"></block> -->
        <block type="set_solenoid_single">
          <value name="VALUE">
            <block type="logic_boolean" id="16" x="245" y="191">
              <field name="BOOL">TRUE</field>
            </block>
          </value>
        </block>
      <!-- </category> -->
      <!-- <category name="Double Solenoid (Valve)"> -->
        <!-- <block type="declare_solenoid_double"></block> -->
        <block type="double_solenoid_set"></block>
      <!-- </category> -->


    </category>

    <category name="Logic">
      <block type="controls_if"></block>
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
<!--       <block type="logic_null"></block> -->
      <block type="logic_ternary"></block>
    </category>

    <category name="Loops">
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <block type="math_number">
            <field name="NUM">10</field>
          </block>
        </value>
      </block>
      <block type="controls_whileUntil"></block>
      <block type="controls_for">
        <value name="FROM">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <field name="NUM">10</field>
          </block>
        </value>
        <value name="BY">
          <block type="math_number">
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
<!--       <block type="controls_flow_statements"></block>  LSL does not have a break or continue -->
      <!-- <block type="controls_forEach"></block> -->
      <!-- <block type="controls_repeat"></block> -->
    </category>

    <category name="Math">
      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
      <!-- <block type="math_single"></block> -->
      <!-- <block type="math_constant"></block> -->

        <block type="math_number_property"></block>
<!--         <block type="math_change"></block> -->
        <block type="math_round"></block>
<!--         <block type="math_trig"></block> -->
<!--         <block type="math_on_list"></block> -->
        <block type="math_modulo"></block>
<!--         <block type="math_constrain"></block>
        <block type="math_random_int"></block>
        <block type="math_random_float"></block> -->

    </category>

    <category name="Text">
      <block type="text"></block>
      <block type="text_print">
        <value name="TEXT">
          <block type="text"></block>
        </value>
      </block>
      <block type="text_join"></block>
    </category>


    <category name="Timing">
      <block type="us_counter"></block>
    </category>

    <category name="Variables" custom="VARIABLE"></category>


  </xml>



</div>
<div class="row">
	<div ng-include="'app/wiz/steps/debug.html'"></div>
</div>
